(()=>{"use strict";const n="http://localhost:3000";class t{constructor(t=n){this.baseURL=t}async request(n,t={}){const e=`${this.baseURL}${n}`,a={headers:{"Content-Type":"application/json",...t.headers},...t};try{console.log(`üîÑ API Request: ${a.method||"GET"} ${e}`);const n=await fetch(e,a),t=await n.json();if(!n.ok)throw new Error(t.message||`HTTP error! status: ${n.status}`);return console.log(`‚úÖ API Response: ${e}`,t),t}catch(n){throw console.error(`‚ùå API Error: ${e}`,n),n}}async get(n){return this.request(n,{method:"GET"})}async post(n,t){return this.request(n,{method:"POST",body:JSON.stringify(t)})}}const e=new t;window.ApiClient=t,window.API_BASE_URL=n;class a{static currentLanguage="th";static supportedLanguages=["th","en","zh","ja"];static getCurrentLanguage(){return this.currentLanguage||localStorage.getItem("language")||"th"}static setLanguage(n){return!!this.supportedLanguages.includes(n)&&(this.currentLanguage=n,localStorage.setItem("language",n),window.dispatchEvent(new CustomEvent("languageChange",{detail:{language:n}})),!0)}static translate(n,t=null){return n?"string"==typeof n?n:n[t||this.getCurrentLanguage()]||n.th||n.en||"":""}static init(){const n=localStorage.getItem("language");n&&this.supportedLanguages.includes(n)&&(this.currentLanguage=n)}}a.init();class s{static showLoading(n){const t=document.getElementById(n);t&&(t.innerHTML='\n                <div class="text-center py-5">\n                    <div class="spinner-border text-primary" role="status">\n                        <span class="visually-hidden">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span>\n                    </div>\n                    <div class="mt-2 text-muted">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>\n                </div>\n            ')}static showEmpty(n,t="‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"){const e=document.getElementById(n);e&&(e.innerHTML=`\n                <div class="text-center py-5 text-muted">\n                    <i class="fas fa-inbox fa-3x mb-3"></i>\n                    <p>${t}</p>\n                </div>\n            `)}static showError(n,t="‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"){const e=document.getElementById(n);e&&(e.innerHTML=`\n                <div class="text-center py-5 text-danger">\n                    <i class="fas fa-exclamation-triangle fa-3x mb-3"></i>\n                    <p>${t}</p>\n                </div>\n            `)}static truncateText(n,t=100){return n?n.length<=t?n:n.substring(0,t)+"...":""}static generateStars(n){const t=Math.floor(n),e=n%1>=.5,a=5-t-(e?1:0);let s="";for(let n=0;n<t;n++)s+='<i class="fas fa-star text-warning"></i>';e&&(s+='<i class="fas fa-star-half-alt text-warning"></i>');for(let n=0;n<a;n++)s+='<i class="far fa-star text-muted"></i>';return s}static getImageUrl(n){return n?n.startsWith("http")?n:`http://localhost:3000/uploads/${n}`:"https://via.placeholder.com/400x250?text=No+Image"}static formatDate(n){return new Date(n).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})}static formatTime(n){return n?n.substring(0,5):""}static showToast(n,t="success"){document.querySelectorAll(".toast-notification").forEach(n=>n.remove());const e=document.createElement("div");e.className=`toast-notification alert alert-${t} position-fixed`,e.style.cssText="top: 20px; right: 20px; z-index: 10000; min-width: 300px;",e.innerHTML=`\n            <div class="d-flex align-items-center">\n                <i class="fas ${this.getToastIcon(t)} me-2"></i>\n                <span>${n}</span>\n                <button type="button" class="btn-close ms-auto" onclick="this.parentElement.parentElement.remove()"></button>\n            </div>\n        `,document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},5e3)}static getToastIcon(n){const t={success:"fa-check-circle",error:"fa-exclamation-circle",warning:"fa-exclamation-triangle",info:"fa-info-circle"};return t[n]||t.info}static debounce(n,t){let e;return function(...a){clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),n(...a)},t)}}static getUrlParams(){const n=new URLSearchParams(window.location.search),t={};for(const[e,a]of n)t[e]=a;return t}static updateUrl(n,t=!1){const e=new URL(window.location);Object.keys(n).forEach(t=>{null!==n[t]&&void 0!==n[t]?e.searchParams.set(t,n[t]):e.searchParams.delete(t)}),t?window.history.replaceState({},"",e):window.history.pushState({},"",e)}}class i{static async getPlaces(n={}){try{const t=new URLSearchParams(n).toString(),a="/api/public/places"+(t?`?${t}`:"");return await e.request(a)}catch(n){throw console.error("Error getting places:",n),n}}static async getPlace(n){try{return await e.request(`/api/public/places/${n}`)}catch(n){throw console.error("Error getting place:",n),n}}static async getFeaturedPlaces(n=6){try{return await this.getPlaces({featured:!0,limit:n,status:"published"})}catch(n){throw console.error("Error getting featured places:",n),n}}static async searchPlaces(n,t={}){try{return await this.getPlaces({search:n,...t})}catch(n){throw console.error("Error searching places:",n),n}}static async getPlacesByCategory(n,t={}){try{return await this.getPlaces({category:n,...t})}catch(n){throw console.error("Error getting places by category:",n),n}}}document.addEventListener("DOMContentLoaded",function(){console.log("üìç Place detail page loaded with Webpack"),async function(){try{const n=s.getUrlParams().id;if(!n)return void s.showError("placeDetailContainer","‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà");await async function(n){const t=document.getElementById("placeDetailContainer");s.showLoading("placeDetailContainer");try{const e=await i.getPlace(n);if(e.success&&e.data){const o=e.data,c=a.translate(o.name);document.title=`${c} - ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß`,t.innerHTML=function(n){const t=a.translate(n.name),e=a.translate(n.description),i=a.translate(n.address),o=n.images&&n.images.length>0?s.getImageUrl(n.images[0]):"https://via.placeholder.com/800x400?text=No+Image",c=n.rating||0,r=n.priceRange||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏";return`\n        \x3c!-- Hero Section --\x3e\n        <div class="place-hero">\n            <div class="place-hero-image">\n                <img src="${o}" alt="${t}" class="w-100" style="height: 400px; object-fit: cover;"\n                     onerror="this.src='https://via.placeholder.com/800x400?text=No+Image'">\n                <div class="place-hero-overlay">\n                    <div class="container">\n                        <div class="row align-items-end h-100">\n                            <div class="col-lg-8">\n                                <div class="place-hero-content">\n                                    <h1 class="place-title text-white mb-3">${t}</h1>\n                                    <div class="place-meta text-white-50">\n                                        <span class="me-4">\n                                            <i class="fas fa-star text-warning me-1"></i>\n                                            ${c.toFixed(1)}\n                                        </span>\n                                        <span class="me-4">\n                                            <i class="fas fa-dollar-sign me-1"></i>\n                                            ${r}\n                                        </span>\n                                        ${n.featured?'<span class="badge bg-warning text-dark">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</span>':""}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- Main Content --\x3e\n        <div class="container my-5">\n            <div class="row">\n                <div class="col-lg-8">\n                    \x3c!-- Description --\x3e\n                    <div class="place-section">\n                        <h3>‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ</h3>\n                        <div class="place-description">\n                            ${e.split("\\n").map(n=>`<p>${n}</p>`).join("")}\n                        </div>\n                    </div>\n\n                    \x3c!-- Image Gallery --\x3e\n                    ${n.images&&n.images.length>1?(d=n.images,`\n        <div class="place-section">\n            <h3>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</h3>\n            <div class="image-gallery" id="imageGallery">\n                <div class="row g-2">\n                    ${d.map((n,t)=>`\n                        <div class="col-md-4">\n                            <div class="gallery-item" onclick="openLightbox(${t})">\n                                <img src="${s.getImageUrl(n)}" alt="‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà ${t+1}" \n                                     class="w-100" style="height: 200px; object-fit: cover; cursor: pointer;">\n                            </div>\n                        </div>\n                    `).join("")}\n                </div>\n            </div>\n        </div>\n    `):""}\n\n                    \x3c!-- Details --\x3e\n                    <div class="place-section">\n                        <h3>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</h3>\n                        <div class="row">\n                            <div class="col-md-6">\n                                <div class="detail-item">\n                                    <strong>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</strong>\n                                    <p>${i}</p>\n                                </div>\n                                ${n.phone?`\n                                <div class="detail-item">\n                                    <strong>‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</strong>\n                                    <p><a href="tel:${n.phone}">${n.phone}</a></p>\n                                </div>\n                                `:""}\n                                ${n.website?`\n                                <div class="detail-item">\n                                    <strong>‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå:</strong>\n                                    <p><a href="${n.website}" target="_blank">${n.website}</a></p>\n                                </div>\n                                `:""}\n                            </div>\n                            <div class="col-md-6">\n                                ${n.openingHours?(l=n.openingHours,`\n        <div class="detail-item">\n            <strong>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î:</strong>\n            <div class="opening-hours">\n                ${Object.entries(l).map(([n,t])=>`\n                    <div class="hours-item">\n                        <span class="day">${function(n){return{monday:"‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå",tuesday:"‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£",wednesday:"‡∏û‡∏∏‡∏ò",thursday:"‡∏û‡∏§‡∏´‡∏±‡∏™‡∏Ø",friday:"‡∏®‡∏∏‡∏Å‡∏£‡πå",saturday:"‡πÄ‡∏™‡∏≤‡∏£‡πå",sunday:"‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå"}[n.toLowerCase()]||n}(n)}:</span>\n                        <span class="hours">${t||"‡∏õ‡∏¥‡∏î"}</span>\n                    </div>\n                `).join("")}\n            </div>\n        </div>\n    `):""}\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Map --\x3e\n                    ${n.location&&n.location.lat&&n.location.lng?function(n){return`\n        <div class="place-section">\n            <h3>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</h3>\n            <div class="map-container">\n                <div id="placeMap" style="height: 300px; background: #f8f9fa; border-radius: 8px;">\n                    <div class="d-flex align-items-center justify-content-center h-100">\n                        <div class="text-center">\n                            <i class="fas fa-map-marked-alt fa-3x text-muted mb-3"></i>\n                            <p class="text-muted">‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>\n                            <button class="btn btn-primary" onclick="openGoogleMaps(${n.location.lat}, ${n.location.lng})">\n                                <i class="fas fa-external-link-alt me-2"></i>\n                                ‡∏î‡∏π‡πÉ‡∏ô Google Maps\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `}(n):""}\n                </div>\n\n                \x3c!-- Sidebar --\x3e\n                <div class="col-lg-4">\n                    <div class="place-sidebar">\n                        \x3c!-- Quick Info --\x3e\n                        <div class="sidebar-card">\n                            <h5>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</h5>\n                            <div class="quick-info">\n                                <div class="info-item">\n                                    <i class="fas fa-star text-warning"></i>\n                                    <span>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${c.toFixed(1)}/5</span>\n                                </div>\n                                <div class="info-item">\n                                    <i class="fas fa-dollar-sign text-success"></i>\n                                    <span>‡∏£‡∏≤‡∏Ñ‡∏≤: ${r}</span>\n                                </div>\n                                ${n.category?`\n                                <div class="info-item">\n                                    <i class="fas fa-tag text-info"></i>\n                                    <span>‡∏´‡∏°‡∏ß‡∏î: ${n.categoryName||n.category}</span>\n                                </div>\n                                `:""}\n                            </div>\n                        </div>\n\n                        \x3c!-- Share --\x3e\n                        <div class="sidebar-card">\n                            <h5>‡πÅ‡∏ä‡∏£‡πå‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ</h5>\n                            <div class="share-buttons" id="shareButtons">\n                                \x3c!-- Share buttons will be generated by JS --\x3e\n                            </div>\n                        </div>\n\n                        \x3c!-- Navigation --\x3e\n                        <div class="sidebar-card">\n                            <h5>‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</h5>\n                            <div class="d-grid gap-2">\n                                ${n.location&&n.location.lat&&n.location.lng?`\n                                <button class="btn btn-outline-primary" onclick="openGoogleMaps(${n.location.lat}, ${n.location.lng})">\n                                    <i class="fas fa-directions me-2"></i>\n                                    Google Maps\n                                </button>\n                                `:""}\n                                <button class="btn btn-outline-secondary" onclick="goBack()">\n                                    <i class="fas fa-arrow-left me-2"></i>\n                                    ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- Related Places --\x3e\n        <div class="container mb-5">\n            <div class="row">\n                <div class="col-12">\n                    <h3>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á</h3>\n                    <div id="relatedPlacesContainer" class="row">\n                        \x3c!-- Related places will be loaded here --\x3e\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;var l,d}(o),o.category&&async function(n,t){const e=document.getElementById("relatedPlacesContainer");try{const o=await i.getPlacesByCategory(n,{limit:3,exclude:t});o.success&&o.data.length>0?e.innerHTML=o.data.map(n=>function(n){const t=a.translate(n.name),e=n.images&&n.images.length>0?s.getImageUrl(n.images[0]):"https://via.placeholder.com/300x200?text=No+Image";return`\n        <div class="col-md-4 mb-3">\n            <div class="card h-100" onclick="goToPlace('${n.id}')" style="cursor: pointer;">\n                <img src="${e}" alt="${t}" class="card-img-top" style="height: 200px; object-fit: cover;">\n                <div class="card-body">\n                    <h6 class="card-title">${t}</h6>\n                    <div class="text-muted small">\n                        <i class="fas fa-star text-warning me-1"></i>\n                        ${(n.rating||0).toFixed(1)}\n                    </div>\n                </div>\n            </div>\n        </div>\n    `}(n)).join(""):e.innerHTML='<div class="col-12"><p class="text-muted">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á</p></div>'}catch(n){console.error("Error loading related places:",n),e.innerHTML='<div class="col-12"><p class="text-danger">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ</p></div>'}}(o.category,n)}else s.showError("placeDetailContainer","‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ")}catch(n){console.error("Error loading place detail:",n),s.showError("placeDetailContainer","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ")}}(n),console.log("Image gallery initialized"),console.log("Map initialized"),function(){const n=document.getElementById("shareButtons");if(!n)return;const t=encodeURIComponent(window.location.href),e=encodeURIComponent(document.title);n.innerHTML=`\n        <div class="d-flex gap-2">\n            <button class="btn btn-outline-primary flex-fill" onclick="shareOnFacebook('${t}')">\n                <i class="fab fa-facebook-f"></i>\n            </button>\n            <button class="btn btn-outline-info flex-fill" onclick="shareOnTwitter('${t}', '${e}')">\n                <i class="fab fa-twitter"></i>\n            </button>\n            <button class="btn btn-outline-success flex-fill" onclick="shareOnLine('${t}')">\n                <i class="fab fa-line"></i>\n            </button>\n            <button class="btn btn-outline-secondary flex-fill" onclick="copyLink()">\n                <i class="fas fa-copy"></i>\n            </button>\n        </div>\n    `}()}catch(n){console.error("Error initializing detail page:",n),s.showError("placeDetailContainer","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ")}}()}),window.openLightbox=function(n){console.log("Open lightbox for image:",n)},window.openGoogleMaps=function(n,t){window.open(`https://www.google.com/maps?q=${n},${t}`,"_blank")},window.goBack=function(){document.referrer?window.history.back():window.location.href="../places/"},window.goToPlace=function(n){window.location.href=`detail.html?id=${n}`},window.shareOnFacebook=function(n){window.open(`https://www.facebook.com/sharer/sharer.php?u=${n}`,"_blank")},window.shareOnTwitter=function(n,t){window.open(`https://twitter.com/intent/tweet?url=${n}&text=${t}`,"_blank")},window.shareOnLine=function(n){window.open(`https://social-plugins.line.me/lineit/share?url=${n}`,"_blank")},window.copyLink=function(){navigator.clipboard.writeText(window.location.href).then(()=>{s.showToast("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢","success")}).catch(()=>{s.showToast("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏î‡πâ","error")})}})();
//# sourceMappingURL=detail.1497fe2760da64e58918.js.map