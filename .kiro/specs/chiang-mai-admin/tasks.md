# แผนการดำเนินงาน

- [x] 1. ตั้งค่าโครงสร้างโปรเจคและไฟล์พื้นฐาน

  - สร้างโครงสร้างโฟลเดอร์ตามที่กำหนดในการออกแบบ
  - สร้างไฟล์ package.json พร้อม dependencies ที่จำเป็น
  - สร้างไฟล์ JSON เริ่มต้นสำหรับข้อมูล (places.json, categories.json, users.json)
  - _ความต้องการ: 11.4, 11.5_

- [x] 2. พัฒนาระบบการเข้าสู่ระบบและการจัดการเซสชัน
- [x] 2.1 สร้างหน้าเข้าสู่ระบบ

  - สร้างไฟล์ views/login.html พร้อมฟอร์มเข้าสู่ระบบ
  - เพิ่ม CSS สำหรับหน้าเข้าสู่ระบบ
  - _ความต้องการ: 1.1_

- [x] 2.2 พัฒนา authentication middleware และ routes

  - สร้างไฟล์ routes/auth.js สำหรับจัดการการเข้าสู่ระบบ
  - ใช้ bcrypt สำหรับ password hashing
  - ใช้ express-session สำหรับจัดการเซสชัน
  - _ความต้องการ: 1.1, 1.2, 1.3, 1.4_

- [x] 2.3 ใช้งานระบบป้องกัน brute force

  - เพิ่มการนับจำนวนครั้งในการพยายามเข้าสู่ระบบ
  - ใช้งานการล็อคบัญชีชั่วคราว 15 นาทีหลังจากพยายาม 5 ครั้ง
  - _ความต้องการ: 1.5, 1.6_

- [x] 2.4 สร้างระบบบันทึกประวัติการเข้าสู่ระบบ

  - บันทึกวันที่และเวลาการเข้าสู่ระบบ
  - อัปเดตข้อมูลผู้ใช้ในไฟล์ JSON
  - _ความต้องการ: 1.7_

- [x] 3. พัฒนาระบบจัดการไฟล์ JSON
- [x] 3.1 สร้าง utility functions สำหรับจัดการไฟล์ JSON

  - สร้างฟังก์ชันอ่านและเขียนไฟล์ JSON
  - เพิ่มการตรวจสอบความถูกต้องของโครงสร้าง JSON
  - _ความต้องการ: 11.1, 11.2, 11.6_

- [x] 3.2 ใช้งานระบบสำรองข้อมูลอัตโนมัติ

  - สร้างโฟลเดอร์ data/backups/
  - สร้างฟังก์ชันสำรองไฟล์ก่อนการแก้ไขทุกครั้ง
  - _ความต้องการ: 11.5_

- [x] 3.3 เพิ่มการจัดการข้อผิดพลาดสำหรับไฟล์ JSON

  - สร้างฟังก์ชันสร้างไฟล์ใหม่เมื่อไฟล์เสียหาย
  - เพิ่มข้อความแสดงข้อผิดพลาดที่ชัดเจน
  - _ความต้องการ: 11.4, 11.7_

- [x] 4. สร้างหน้าแดชบอร์ดและการนำทาง
- [x] 4.1 สร้างหน้าแดชบอร์ดหลัก

  - สร้างไฟล์ views/dashboard.html
  - แสดงสถิติรวม (จำนวนสถานที่, หมวดหมู่, สถานที่ใหม่)
  - เพิ่มเมนูนำทางไปยังหน้าต่างๆ
  - _ความต้องการ: 1.1_

- [x] 4.2 เพิ่มข้อมูลผู้ใช้และปุ่มออกจากระบบ

  - แสดงชื่อผู้ใช้ที่เข้าสู่ระบบ
  - เพิ่มปุ่มออกจากระบบที่ล้างเซสชัน
  - _ความต้องการ: 1.4_

- [x] 5. พัฒนาระบบจัดการหมวดหมู่
- [x] 5.1 สร้างหน้าจัดการหมวดหมู่

  - สร้างไฟล์ views/categories.html
  - แสดงรายการหมวดหมู่พร้อมจำนวนสถานที่
  - _ความต้องการ: 6.1_

- [x] 5.2 พัฒนา routes สำหรับจัดการหมวดหมู่

  - สร้างไฟล์ routes/categories.js
  - เพิ่มฟังก์ชันเพิ่ม แก้ไข ลบหมวดหมู่
  - ตรวจสอบความไม่ซ้ำกันของชื่อหมวดหมู่
  - _ความต้องการ: 6.2, 6.3, 6.4, 6.5_

- [x] 6. สร้างหน้ารายการสถานที่และระบบค้นหา
- [x] 6.1 สร้างหน้ารายการสถานที่

  - สร้างไฟล์ views/places-list.html
  - แสดงตารางข้อมูลสถานที่พร้อมการแบ่งหน้า
  - _ความต้องการ: 2.1_

- [x] 6.2 เพิ่มระบบค้นหาและกรอง

  - เพิ่มช่องค้นหาตามชื่อหรือคำสำคัญ
  - เพิ่มระบบกรองตามหมวดหมู่และสถานะ
  - _ความต้องการ: 2.2, 2.3, 2.4_

- [x] 6.3 เพิ่มปุ่มจัดการสถานที่

  - เพิ่มปุ่มแก้ไข ลบ เปลี่ยนสถานะ
  - เพิ่มลิงก์ไปยังหน้ารายละเอียด
  - _ความต้องการ: 2.5_

- [x] 7. พัฒนาฟอร์มสร้างและแก้ไขสถานที่
- [x] 7.1 สร้างหน้าฟอร์มสถานที่

  - สร้างไฟล์ views/place-form.html
  - เพิ่มแท็บสำหรับหลายภาษา (ไทย อังกฤษ จีน ญี่ปุ่น)
  - _ความต้องการ: 3.1, 7.1, 7.2_

- [x] 7.2 เพิ่มฟิลด์ข้อมูลหลักและการตรวจสอบ

  - เพิ่มฟิลด์ชื่อ คำอธิบาย หมวดหมู่ เวลาทำการ ช่วงราคา
  - เพิ่มการตรวจสอบความจำเป็นของภาษาไทย
  - _ความต้องการ: 3.2, 3.3, 7.4_

- [x] 7.3 เพิ่มฟิลด์ข้อมูลการติดต่อและการตรวจสอบ

  - เพิ่มฟิลด์ที่อยู่ โทรศัพท์ เว็บไซต์ Facebook Instagram
  - เพิ่มการตรวจสอบรูปแบบโทรศัพท์ไทย URL และลิงก์โซเชียล
  - เพิ่มฟิลด์พิกัดตำแหน่งและการตรวจสอบ
  - _ความต้องการ: 10.1, 10.2, 10.3, 10.4, 10.5_

- [x] 7.4 เพิ่มการแสดงแผนที่

  - เพิ่มการแสดงตัวอย่างแผนที่จากพิกัด GPS
  - _ความต้องการ: 10.6_

- [ ] 8. พัฒนาระบบจัดการรูปภาพ
- [ ] 8.1 ตั้งค่า multer สำหรับการอัปโหลดไฟล์

  - ติดตั้งและกำหนดค่า multer middleware
  - สร้างโฟลเดอร์ public/uploads/
  - _ความต้องการ: 8.1, 8.2_

- [ ] 8.2 เพิ่มการตรวจสอบไฟล์รูปภาพ

  - ตรวจสอบประเภทไฟล์ (JPG, PNG, WebP)
  - ตรวจสอบขนาดไฟล์ (สูงสุด 5MB ต่อรูป)
  - _ความต้องการ: 8.1, 8.2_

- [ ] 8.3 พัฒนาระบบจัดการหลายรูปภาพ

  - เพิ่มการอัปโหลดหลายรูปพร้อมกัน
  - เพิ่มการจัดเรียงรูปภาพใหม่
  - เพิ่มการตั้งรูปเด่น
  - _ความต้องการ: 8.3, 8.4_

- [ ] 8.4 เพิ่มการลบรูปภาพ

  - เพิ่มฟังก์ชันลบไฟล์รูปภาพและอัปเดตฐานข้อมูล
  - เพิ่มข้อความแสดงข้อผิดพลาดเฉพาะ
  - _ความต้องการ: 8.5, 8.6_

- [ ] 9. พัฒนา routes สำหรับจัดการสถานที่
- [ ] 9.1 สร้าง routes สำหรับ CRUD สถานที่

  - สร้างไฟล์ routes/places.js
  - เพิ่ม endpoints สำหรับสร้าง อ่าน อัปเดต ลบสถานที่
  - _ความต้องการ: 3.2, 4.2, 5.2_

- [ ] 9.2 เพิ่มการตรวจสอบข้อมูลใน backend

  - เพิ่มการตรวจสอบฟิลด์ที่จำเป็น
  - เพิ่มการตรวจสอบรูปแบบข้อมูลต่างๆ
  - _ความต้องการ: 3.3, 3.5, 4.5_

- [ ] 9.3 เพิ่มการจัดการสถานะสถานที่

  - เพิ่มฟังก์ชันเปลี่ยนสถานะ (ร่าง เผยแพร่ ไม่ใช้งาน เด่น)
  - บันทึกการเปลี่ยนแปลงพร้อมเวลา
  - _ความต้องการ: 9.1, 9.2, 9.3, 9.4, 9.5_

- [ ] 10. เพิ่มการยืนยันการลบ
- [ ] 10.1 เพิ่มกล่องโต้ตอบยืนยันการลบ

  - เพิ่ม JavaScript สำหรับแสดงกล่องโต้ตอบยืนยัน
  - จัดการการยกเลิกและยืนยันการลบ
  - _ความต้องการ: 5.1, 5.2, 5.3_

- [ ] 10.2 จัดการการลบแบบเรียงต่อกัน

  - ลบข้อมูลที่เกี่ยวข้องเมื่อลบสถานที่
  - _ความต้องการ: 5.4_

- [ ] 11. พัฒนา CSS และ JavaScript สำหรับหน้า admin
- [ ] 11.1 สร้างไฟล์ CSS หลัก

  - สร้างไฟล์ public/css/admin.css
  - เพิ่มสไตล์สำหรับทุกหน้า admin
  - ใช้ Bootstrap 5 เป็นพื้นฐาน

- [ ] 11.2 สร้างไฟล์ JavaScript หลัก

  - สร้างไฟล์ public/js/admin.js
  - เพิ่มฟังก์ชันสำหรับการจัดการฟอร์ม การสลับภาษา และการจัดการรูปภาพ

- [ ] 12. สร้างไฟล์ server.js หลักและเชื่อมต่อทุกส่วน
- [ ] 12.1 ตั้งค่า Express server

  - สร้างไฟล์ server.js
  - ตั้งค่า middleware ที่จำเป็น (express-session, multer, static files)
  - เชื่อมต่อ routes ทั้งหมด

- [ ] 12.2 เพิ่ม middleware สำหรับตรวจสอบการเข้าสู่ระบบ

  - สร้าง middleware ตรวจสอบเซสชันก่อนเข้าถึงหน้า admin
  - จัดการการเปลี่ยนเส้นทางเมื่อเซสชันหมดอายุ
  - _ความต้องการ: 1.3_

- [ ] 13. ทดสอบและปรับปรุงระบบ
- [ ] 13.1 ทดสอบการทำงานของระบบทั้งหมด

  - ทดสอบการเข้าสู่ระบบและออกจากระบบ
  - ทดสอบการจัดการสถานที่และหมวดหมู่
  - ทดสอบการอัปโหลดและจัดการรูปภาพ

- [ ] 13.2 ทดสอบการตรวจสอบข้อมูลและการจัดการข้อผิดพลาด
  - ทดสอบการตรวจสอบข้อมูลทั้งหมด
  - ทดสอบการแสดงข้อความแสดงข้อผิดพลาด
  - ทดสอบระบบสำรองและกู้คืนข้อมูล
